<div class="AsignarConsorciados">
    <!-- tabs to make styles to support responsive... -->
    <mat-tab-group mat-align-tabs="start">

        <mat-tab label="Integrantes">
            <div class="NombreConsorcio_Dialog">
                <div class="NombreDatosClienteConsorciados">Dato del Cliente</div>
                <div class="DatosConsorcio">
                    <div>Razón Social:&nbsp;&nbsp; RZ</div>
                    <div>RUC:&nbsp;&nbsp; RUC</div>
                </div>
            </div>
            <form [formGroup]="asignarEmpresaFormDialog"
                (ngSubmit)="asignarEmpresaConsorcio(asignarEmpresaFormDialog.value)">
                <div class="BuscadorConsorciados">
                    <mat-form-field appearance="fill">
                        <mat-label>Sociedad</mat-label>
                        <mat-select formControlName="sociedad" >
                            <mat-option *ngFor="let sociedad of listadoSociedades" [value]="sociedad">
                                {{ sociedad.nombre }}
                            </mat-option>
                        </mat-select>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Ruc</mat-label>
                        <input matInput placeholder="Ingresar el RUC" formControlName="ruc" #input maxlength="11"
                            required>
                        <mat-hint align="end">{{input.value?.length || 0}}/11</mat-hint>
                        <mat-hint>
                            <mat-error [hidden]="!(formErrors.ruc)">
                                {{formErrors.ruc}}
                            </mat-error>
                        </mat-hint>

                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Razón Social</mat-label>
                        <input matInput placeholder="Razón Social" formControlName="razon_social">
                        <mat-hint>
                            <mat-error [hidden]="!(formErrors.razon_social)">
                                {{formErrors.razon_social}}
                            </mat-error>
                        </mat-hint>
                    </mat-form-field>

                    <mat-form-field appearance="fill">
                        <mat-label>Participación</mat-label>
                        <input type="number" matInput placeholder="ingrese " formControlName="participacion"
                            (focusout)="validarParticipacion(asignarEmpresaFormDialog.value)" required>
                        <mat-hint>
                            <mat-error [hidden]="!(formErrors.participacion)">
                                {{formErrors.participacion}}
                            </mat-error>
                        </mat-hint>

                    </mat-form-field>



                    <div class="objetoBoton">
                        <button mat-raised-button class="boton-principal-light" type="submit"
                            [disabled]="asignarEmpresaFormDialog.invalid">Agregar</button>
                    </div>
                </div>
            </form>



            <div class="content-table">
                <!-- Table listadoIntegrantes  -->
                <table mat-table matTableResponsive [dataSource]="listadoIntegrantes"
                    class="mat-elevation-z8 tablaConsorciados">
                    <caption title="lista de consorciados"></caption>


                    <!-- Column -->
                    <ng-container matColumnDef="sociedad">
                        <th mat-header-cell *matHeaderCellDef> Sociedad </th>
                        <td mat-cell *matCellDef="let element">
                            {{(element.empresa.sociedad?element.empresa.sociedad.nombre:'NR')}}</td>
                    </ng-container>

                    <!-- Column -->
                    <!--                         <ng-container matColumnDef="grupo_cliente">
                            <th mat-header-cell *matHeaderCellDef> Grupo Cliente </th>
                            <td mat-cell *matCellDef="let element">
                                {{(element.empresa.grupo_cliente?element.empresa.grupo_cliente.nombre:'NR')}} </td>
                        </ng-container>
 -->
                    <!-- Column -->
                    <ng-container matColumnDef="razonsocial">
                        <th mat-header-cell *matHeaderCellDef> Razón Social </th>
                        <td mat-cell *matCellDef="let element">
                            {{(element.empresa.razon_social?element.empresa.razon_social:'NR')}} </td>
                    </ng-container>

                    <!-- Column -->
                    <ng-container matColumnDef="ruc">
                        <th mat-header-cell *matHeaderCellDef> RUC </th>
                        <td mat-cell *matCellDef="let element">
                            {{(element.empresa.numero_documento?element.empresa.numero_documento:'NR')}} </td>
                    </ng-container>

                    <!-- Column -->
                    <!--                         <ng-container matColumnDef="canal">
                            <th mat-header-cell *matHeaderCellDef> Canal Comercial </th>
                            <td mat-cell *matCellDef="let element">
                                {{(element.empresa.tipo_canal?element.empresa.tipo_canal.nombre:'NR')}} </td>
                        </ng-container>
 -->
                    <!-- Column -->
                    <ng-container matColumnDef="participacion">
                        <th mat-header-cell *matHeaderCellDef> Participacion </th>
                        <td mat-cell *matCellDef="let element">
                            {{(element.participacion?element.participacion:'NR')}} </td>
                    </ng-container>

                    <!-- Column -->
                    <ng-container matColumnDef="estado_cliente_agrupacion">
                        <th mat-header-cell *matHeaderCellDef> Estado </th>
                        <td mat-cell *matCellDef="let element">
                            {{(element.estado_cliente_agrupacion?element.estado_cliente_agrupacion.nombre:'NR')}}
                        </td>
                    </ng-container>

                    <ng-container matColumnDef="id">
                        <th mat-header-cell *matHeaderCellDef> Acciones </th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-icon-button class="color-secundario" (click)="eliminarClienteEmpresa(element)"
                                *ngIf="mostrarEliminar(element)">
                                <mat-icon>{{mostrarIconoEliminar(element)}}</mat-icon>
                            </button>
                        </td>
                    </ng-container>
                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>

            </div>


        </mat-tab>
        <mat-tab label="Documentos de Participación">
            <div class="NombreConsorcio_Dialog">
                <div class="NombreDatosClienteConsorciados">Dato del Cliente</div>
                <div class="DatosConsorcio">
                    <div>Razón Social:&nbsp;&nbsp; RZ</div>
                    <div>RUC:&nbsp;&nbsp; RUC</div>
                </div>
            </div>
            <div class="content-section">
                <div class="contenidoForm ">

                    <!-- formulario de participacion-->


                    <form [formGroup]="formParticipacion" (ngSubmit)="onSaveForm()">
                        <div class="zona_de_adjuntos">
                            <label>Adjuntar documento:</label>
                            <mat-form-field appearance="fill" (click)="f_input.click()">
                                <button mat-icon-button matPrefix type="button">
                                    <mat-icon>attach_file</mat-icon>
                                </button>
                                <input type="text" placeholder="Seleccionar..." readonly matInput
                                    formControlName="file" />
                                <input type="file" hidden #f_input (change)="onInputFileChange(f_input.files)" />
                            </mat-form-field>

                            <label>Descripción:</label>
                            <mat-form-field appearance="fill">
                                <mat-label>Escriba una descripción</mat-label>
                                <textarea formControlName="description" matInput placeholder="Escribir..."></textarea>
                            </mat-form-field>
                            <div> <button mat-raised-button class="boton-principal-light"
                                    [disabled]="!formParticipacion.valid" type="submit" matStepperNext>Guardar</button>
                            </div>

                        </div>

                    </form>

                    <div class="zona_de_adjuntos">
                        <br>
                        <table mat-table matTableResponsive [dataSource]="listadoAdjuntosParticipacion"
                            class="mat-elevation-z8 ">
                            <caption title="listado adjuntos participacion"></caption>


                            <!-- Column -->
                            <ng-container matColumnDef="informacion_adicional">
                                <th mat-header-cell *matHeaderCellDef> informacion adicional</th>
                                <td mat-cell *matCellDef="let element"> {{element.informacion_adicional}} </td>
                            </ng-container>
                            <!-- Column -->
                            <ng-container matColumnDef="adjunto">
                                <th mat-header-cell *matHeaderCellDef> Adjunto</th>
                                <td mat-cell *matCellDef="let element">
                                    <button mat-mini-fab color="white" aria-label="Buscar" class="boton-buscar"
                                        type="button" (click)="openURL(element.adjunto)">
                                        <mat-icon>attach_file</mat-icon>
                                    </button>
                                </td>
                            </ng-container>

                            <!-- Column -->
                            <!--  <ng-container matColumnDef="id">
                                     <th mat-header-cell *matHeaderCellDef> Acciones </th>
                                     <td mat-cell *matCellDef="let element">
                                         <button mat-icon-button (click)="editarPlan(element)"><mat-icon>edit</mat-icon></button>
                                     </td>
                                 </ng-container>   -->

                            <tr mat-header-row *matHeaderRowDef="displayedColumnsF"></tr>
                            <tr mat-row *matRowDef="let row; columns: displayedColumnsF;"></tr>
                        </table>

                    </div>
                </div>

            </div>
        </mat-tab>
    </mat-tab-group>


</div>

<div class="Botonera_Consorcio">
    <mat-divider class=""></mat-divider>

    <div class="botonera_Consorciados">

        <button mat-raised-button class="objeto boton-secundario" type="button"
            (click)="onNoClick('CONFIRM_DLG_NO')">Cerrar</button>
        <button mat-flat-button class="boton-secundario" (click)="solicitarAprobacion()"
            *ngIf="mostrarSolicitudAprobacion">Solicitar</button>
        <button mat-flat-button class="boton-warn" (click)="RechazarConsorcio()" *ngIf="isAdmin">Rechazar</button>
        <button mat-flat-button class="boton-principal-light" (click)="AprobarConsorcio()"
            *ngIf="isAdmin">Aprobar</button>
    </div>
</div>