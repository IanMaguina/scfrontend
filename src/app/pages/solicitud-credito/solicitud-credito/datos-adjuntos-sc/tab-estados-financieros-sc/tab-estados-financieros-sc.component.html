<mat-card class="header_adjuntos">
    <span class="adjuntos_text">Estados Financieros:</span>
    <mat-radio-group [formControl]="estadosfinancieros" aria-label="Selecciona una opción" [disabled]="!editable">
        <mat-radio-button class="header_seleccionar" [(value)]="adjuntarfinancieros">Si
        </mat-radio-button>
        <mat-radio-button [(value)]="motivofinancieros">No</mat-radio-button>
    </mat-radio-group>
</mat-card>


<div class="si_o_no" *ngIf="estadosfinancieros.value === adjuntarfinancieros">

    <mat-card class="subheader_adjuntos">
        <span class="Agregar"> + Agregar Archivos</span>
        <br>
        <strong><span style="color: #ff0000">*Los estados financieros deben tener una vigencia no mayor a 3
                meses.</span></strong>
    </mat-card>


    <mat-card class="Adjuntos_LC">

        <form [formGroup]="formFinancialState" (ngSubmit)="onSaveForm()">
            <div class="Adjuntos_EstadosFinancieros">
                <label>Adjuntar documento: </label>
                <mat-form-field appearance="fill" (click)="f_input.click()">
                    <button mat-icon-button matPrefix type="button">
                        <mat-icon>attach_file</mat-icon>
                    </button>
                    <input type="text" placeholder="Seleccione el archivo a adjuntar" readonly matInput
                        formControlName="file" />
                    <input type="file" hidden #f_input (change)="onInputFileChange(f_input.files)" />
                </mat-form-field>

                <label>Descripción:</label>
                <mat-form-field appearance="fill">
                    <mat-label>Escriba una descripción</mat-label>
                    <textarea formControlName="description" matInput placeholder="Escribir..."></textarea>
                </mat-form-field>
                <div class="BotonEstadosFinancierosGuardar">
                    <button mat-raised-button class="boton-principal-light" [disabled]="!formFinancialState.valid"
                        type="submit" matStepperNext>Guardar</button>
                </div>
            </div>
            <div>
                <table mat-table matTableResponsive [dataSource]="listadoEstadosFinancieros" class="mat-elevation-z8">
                    <caption title="listado Estados Financieros"></caption>


                    <!-- Column -->
                    <ng-container matColumnDef="informacion_adicional">
                        <th mat-header-cell *matHeaderCellDef> informacion adicional</th>
                        <td mat-cell *matCellDef="let element"> {{element.informacion_adicional}} </td>
                    </ng-container>
                    <!-- Column -->
                    <ng-container matColumnDef="adjunto">
                        <th mat-header-cell *matHeaderCellDef> Adjunto</th>
                        <td mat-cell *matCellDef="let element">
                            <button mat-mini-fab color="white" aria-label="Buscar" class="boton-buscar" type="button"
                                (click)="openURL(element.adjunto)">
                                <mat-icon>attach_file</mat-icon>
                            </button>
                        </td>
                    </ng-container>

                    <!-- Column -->
                    <ng-container matColumnDef="id">
                             <th mat-header-cell *matHeaderCellDef> Acciones </th>
                             <td mat-cell *matCellDef="let element">
                                 <button mat-icon-button (click)="eliminar(element)" type="button"><mat-icon>delete</mat-icon></button>
                             </td>
                         </ng-container>

                    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
                    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
                </table>
            </div>
        </form>
    </mat-card>
</div>


<div>
    <mat-card class="Adjuntos_LC" *ngIf="estadosfinancieros.value === motivofinancieros">
        <div class="Subtitulo"><span>Es obligatorio indicar el motivo de no presentar estados financieros selecciona una
                opción:</span></div>
        <div>
            <mat-radio-group class="OpcionesEstadosFinancieros" name="Opciones" [(ngModel)]="motivo_financiero" [disabled]="!editable" >
               
                <mat-radio-button [ngClass]="{'Opcion4EstadosFinancieros': motivo.id === id_motivo_otros }" *ngFor="let motivo of motivos" (change)="validaMotivo($event)" [value]="motivo">{{motivo.nombre}}<mat-form-field class="bloquedescripcion" appearance="fill" *ngIf="motivo.id==id_motivo_otros">
                        <mat-label>Escriba una descripción</mat-label>
                        <textarea [(ngModel)]="motivo_descripcion" matInput placeholder="Escribir..."></textarea>
                    </mat-form-field>
                </mat-radio-button>
                
            </mat-radio-group>
        </div>
        <div class="BotonEstadosFinancierosGuardar">
            <button mat-raised-button class="boton-principal-light" *ngIf="editable" [disabled]="!motivo_financiero"
                type="button" (click)="guardarMotivo()" matStepperNext>Guardar</button>
        </div>
    </mat-card>
</div>